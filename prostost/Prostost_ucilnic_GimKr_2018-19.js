// Seznam prostosti učilnic GimKr
// Podatki zajeti 2018-10-18
// Nazadnje posodobljeno 2018-03-14
/* Avtor: Žan Žnidar */

var container = {};

container["p1"] = [[["7","17"],["1"],["7","23"],["2","3","9","13","15","17","22","23","25","42","45","48"],["1","8","9","12","14","16","23","25","29","43","46","49"],[],["8","29","44"],["3","6","8","22","25","29","48"],["1","3","5","6","8","12","16","22","23","25","28","29","31","42","43","44","45","46","47","48","49"],["1","3","5","6","8","12","16","22","23","25","28","29","31","42","43","44","45","46","47","48","49","sptel","zgtel","vp"]],[["1","3","27","28"],["1","27","28","29"],["14","28","30"],["1","4","5","6","7","8","11","15","17","23","25","28","30","46","47","49"],["2","5","6","9","13","14","21","22","23","28","29","30","31"],[],["7","8","14"],["2","4","5","6","7","8","9","11","12","13","14","15","16","17","21","22","23","24","25","27","28","30","31","42","43","44","45","46","47","48","49","sptel","zgtel","vp"],["3","4","5","6","7","8","9","11","12","13","14","15","16","17","21","22","23","24","25","28","30","31","42","43","44","45","46","47","48","49","sptel","zgtel","vp"],["1","3","4","5","6","7","8","9","11","12","13","14","15","16","17","21","22","23","24","25","28","29","30","31","42","43","44","45","46","47","48","49","sptel","zgtel","vp"]],[["7","12","49"],["7","49"],["7","8"],["4","6","8","9","11","12","13","15","25","27","29"],["3","4","6","9","11","14","15","16","17","22","25","30","31","44","45"],[],["8","24"],["1","3","4","5","6","7","8","9","11","12","13","15","16","17","21","23","24","25","27","28","29","30","31","42","43","44","45","46","47","48","49","sptel","zgtel","vp"],["1","3","4","5","6","7","8","9","11","12","13","15","16","17","21","22","23","24","25","27","28","29","30","31","42","43","44","45","46","47","48","49","sptel","zgtel","vp"],["2","3","4","5","6","7","8","9","11","12","13","14","15","16","17","21","22","23","24","25","27","28","29","30","31","42","43","44","45","46","47","48","49","sptel","zgtel","vp"]],[["48"],["25"],[],["4","6","8","9","11","12","13","14","16","23","25","29","30","42","46","48","49"],["3","4","5","11","12","14","17","24","28","43","44"],["8","9","15"],["7","17"],["7","14","29","47","49"],["2","5","6","7","8","12","14","16","17","21","22","23","24","25","27","29","30","42","43","46","47","48","49"],["1","2","5","6","7","8","12","14","16","17","21","22","23","24","25","27","29","30","42","43","46","47","48","49","sptel","zgtel","vp"]],[[],["11","17"],[],["3","8","12","24","27","28","29","43","44"],["4","6","9","12","16","21","22","24","28","29","30","43","48","49"],["3","5","12"],["5","6","8","11","12","13","46"],["2","3","5","6","7","8","9","11","12","13","21","23","25","27","29","42","43","45","46","47","48","49","sptel","zgtel","vp"],["1","2","3","4","5","6","7","8","9","11","12","13","14","15","16","17","21","22","23","24","25","27","28","29","30","31","42","43","44","45","46","47","48","49","sptel","zgtel","vp"],["1","2","3","4","5","6","7","8","9","11","12","13","14","15","16","17","21","22","23","24","25","27","28","29","30","31","42","43","44","45","46","47","48","49","sptel","zgtel","vp"]]];

container["p2"] = [[["7","8"],[],["30"],["4","6","7","11","12","13","15","16","22","23","30","42","48","49"],["3","4","5","7","9","11","12","13","14","15","16","17","22","23","42","43","45","46"],["7"],["1","5"],["1","42","46"],["1","3","5","6","8","12","22","23","24","25","28","29","31","42","43","44","45","46","47","48","49"],["1","2","3","5","6","8","12","16","22","23","24","25","28","29","31","42","43","44","45","46","47","48","49","sptel","zgtel","vp"]],[["2","6","24"],["2","3","14"],["4","7","8","9","27"],["1","4","5","6","7","12","14","15","16","22","23","25","27","29","30","31","46"],["5","6","7","14","15","16","22","24","25","29","42","46","47","48","49"],["49"],["4","45","47","48","49"],["3","4","5","6","7","8","9","11","12","14","15","16","17","21","22","23","24","25","27","28","29","30","31","43","44","45","46","47","48","49","sptel","zgtel","vp"],["1","3","4","5","6","7","8","9","11","12","13","14","15","16","17","21","22","23","25","27","28","29","30","31","42","43","44","45","46","47","48","49","sptel","zgtel","vp"],["1","3","4","5","6","7","8","9","11","12","13","14","15","16","17","21","22","23","25","27","28","29","30","31","42","43","44","45","46","47","48","49","sptel","zgtel","vp"]],[["7","8"],["5","49"],["7","27","48"],["1","4","6","8","9","12","14","16","21","27","29","31","42"],["2","3","5","6","9","12","13","15","21","22","23","24","25","28","29","30","31","42","45","48"],[],["31"],["3","4","5","6","7","8","9","11","12","13","14","15","16","17","21","22","24","25","28","29","30","31","42","43","44","45","46","47","48","49","sptel","zgtel","vp"],["1","2","3","5","6","7","8","9","11","12","13","14","15","16","17","21","22","23","24","25","27","28","29","30","31","42","43","44","45","46","47","48","49","sptel","zgtel","vp"],["1","2","3","5","6","7","8","9","11","12","13","14","15","16","17","21","22","23","24","25","27","28","29","30","31","42","43","44","45","46","47","48","49","sptel","zgtel","vp"]],[["45","47"],[],[],["5","7","9","13","14","15","16","21","24","27","29","43","44","47"],["1","3","6","9","12","17","23","24","25","28","29","30","31","46","47","48","49"],["1","28","31","43"],["2","16"],["1","47","48"],["1","5","6","7","8","12","16","17","21","22","23","24","25","27","29","30","42","43","46","47","48","49"],["1","2","5","6","7","8","12","14","16","17","21","22","23","24","25","27","29","30","42","43","46","47","48","49","sptel","zgtel","vp"]],[["4","8"],["7","24","25","45"],["6","29"],["6","8","9","11","12","14","15","22","29","31","42","44"],["6","7","8","11","13","15","16","21","22","23","24","28","29","31","42","46","47","48"],[],["1","3","5","8","9","12","17","43","48"],["1","2","3","6","8","9","11","12","13","14","15","17","21","23","24","29","42","43","44","46","47","48","49","sptel","zgtel","vp"],["1","2","3","4","5","6","7","8","9","11","12","13","14","15","16","17","21","22","23","24","25","27","29","30","31","42","43","44","45","46","47","48","49","sptel","zgtel","vp"],["1","2","3","4","5","6","7","8","9","11","12","13","14","15","16","17","21","22","23","24","25","27","28","29","30","31","42","43","44","45","46","47","48","49","sptel","zgtel","vp"]]];

container["p3"] = [[["7","49"],["7","49"],["7","8"],["3","4","5","7","8","9","11","13","16","22","23","24","25","27","28","42","44","48","49"],["5","6","14","16","17","23","27","30","42"],[],["2","8","45"],["8","42","44","45","48"],["1","3","5","6","8","12","22","23","24","25","28","29","31","42","43","44","45","46","47","48","49"],["1","3","5","6","8","12","22","23","24","25","28","29","31","42","43","44","45","46","47","48","49","sptel","zgtel","vp"]],[["6","46","47"],["6","14"],["3","4","7","9"],["1","4","6","7","11","12","13","15","21","22","23","25","29","31","46","47","49"],["4","5","8","9","12","14","16","21","22","23","29","30","42","48","49"],["29","43"],["7","28"],["2","3","4","5","6","7","8","9","12","13","14","15","16","17","21","22","23","24","25","27","28","29","30","31","42","43","44","45","46","47","48","49","sptel","zgtel","vp"],["1","2","3","5","6","7","8","9","11","12","13","14","15","16","17","21","22","23","24","25","27","28","29","30","31","42","43","44","45","46","47","48","49","sptel","zgtel","vp"],["1","2","3","5","6","7","8","9","11","12","13","14","15","16","17","21","22","23","24","25","27","28","29","30","31","42","43","44","45","46","47","48","49","sptel","zgtel","vp"]],[["1","31"],["12"],["7"],["1","4","6","8","12","13","22","25","28"],["1","3","4","6","11","12","13","14","16","17","21","27","28","30","31","42","44","45","46","49"],["22","27"],["30"],["4","7","49","sptel","zgtel","vp"],["1","3","4","5","6","7","8","9","11","12","13","14","15","16","17","21","22","23","24","25","28","29","31","42","43","44","45","46","47","48","49","sptel","zgtel","vp"],["1","3","4","5","6","7","8","9","11","12","13","14","15","16","17","21","22","23","24","25","28","29","31","42","43","44","45","46","47","48","49","sptel","zgtel","vp"]],[["8","29","45","46","48"],["3","8"],["9"],["1","3","4","6","9","11","12","14","15","22","23","25","29","31","43","44","48"],["3","5","6","9","14","15","16","23","28","29","30","45","47"],["9"],["22","47"],["7","8","48","49"],["1","5","6","7","8","12","16","17","21","22","24","25","27","29","42","43","46","47","48","49"],["1","5","6","7","8","12","16","17","21","22","23","24","25","27","29","30","42","43","46","47","48","49","sptel","zgtel","vp"]],[["7","8"],["6","7","9","24"],["7","23","30"],["1","6","7","8","11","12","13","16","21","22","23","25","27","30","43","46","48"],["1","5","6","8","11","12","15","17","21","27","29","31","45","48","49"],["6","8","21"],["1","3","8","9","11","21","43","47","48"],["1","3","5","6","8","9","11","12","13","21","22","25","28","29","30","43","44","45","46","47","48","49","sptel","zgtel","vp"],["1","2","3","4","5","6","7","8","9","11","12","13","14","15","16","17","21","22","23","24","25","27","28","29","30","31","42","43","44","45","46","47","48","49","sptel","zgtel","vp"],["1","2","3","4","5","6","7","8","9","11","12","13","14","15","16","17","21","22","23","24","25","27","28","29","30","31","42","43","44","45","46","47","48","49","sptel","zgtel","vp"]]];

container["p4"] = [[["7","8"],["7","8"],[],["6","11","12","13","14","15","21","22","25","48"],["5","9","11","12","13","15","16","17","21","22","23","28","30","31","42","43","43","47","49"],[],["1","2","47"],["1","2","8","25","45"],["1","2","3","5","6","8","12","16","22","23","24","25","28","29","31","42","43","43","45","46","47","48","49"],["1","2","3","5","6","8","12","16","22","23","24","25","28","29","31","42","43","43","45","46","47","48","49","sptel","zgtel","vp"]],[["5","8","9","28","42","45"],["14","25","43","43"],["6","7","11"],["1","4","5","6","7","8","12","13","14","16","22","23","25","27","29","30","31","47","48","49"],["4","7","9","12","13","14","15","28","30","42","46","47","48","49"],["7","14","30"],["4","8"],["3","4","5","6","7","8","9","11","12","13","14","15","16","17","21","22","23","24","25","27","28","29","31","42","43","43","45","46","47","49","sptel","zgtel","vp"],["1","2","3","4","5","6","7","8","9","11","12","13","14","15","16","17","21","22","23","24","25","28","29","31","42","43","43","45","46","47","48","49","sptel","zgtel","vp"],["1","2","3","4","5","6","7","8","9","11","12","13","14","15","16","17","21","22","23","24","25","28","29","31","42","43","43","45","46","47","48","49","sptel","zgtel","vp"]],[["11"],["28"],["8","27"],["5","6","11","12","13","15","16","21","23","30","43","43","48","49"],["5","6","7","9","12","13","15","21","22","23","25","28","29","30","48"],["3","14","17"],["6","24","30","31"],["1","2","3","5","6","8","9","11","12","13","14","15","16","17","21","22","23","24","25","27","28","29","30","31","42","43","43","45","47","48","49","sptel","zgtel","vp"],["1","2","3","5","6","7","8","9","11","12","13","14","15","16","17","21","22","23","24","25","27","29","30","31","42","43","43","45","46","47","48","49","sptel","zgtel","vp"],["1","2","3","4","5","6","7","8","9","11","12","13","14","15","16","17","21","22","23","24","25","27","29","30","31","42","43","43","45","46","47","48","49","sptel","zgtel","vp"]],[["8","47"],["8","47"],[],["5","13","14","15","16","22","23","46","47","48","49"],["1","6","7","9","11","15","16","17","22","23","24","29","42","45","46","47"],["45"],["8","47"],["46","47","48","49"],["1","6","7","8","12","16","17","22","23","24","25","27","29","30","42","43","43","46","47","48","49"],["1","2","5","6","7","8","12","14","16","17","21","22","23","24","25","27","29","30","42","43","43","46","47","48","49","sptel","zgtel","vp"]],[[],["8","45"],["8"],["1","4","5","8","13","16","28","30","31","47"],["1","4","6","9","11","12","13","17","22","24","25","27","28","29","30","31","43","43","47","48","49"],["2","7"],["3","5","6","9","11","13","23","29","30","43","43","46"],["2","3","5","6","7","8","9","11","13","14","16","17","23","27","28","29","30","31","43","43","45","46","48","49","sptel","zgtel","vp"],["1","2","3","5","6","7","8","9","11","12","13","14","15","16","17","21","22","23","24","25","27","28","29","30","31","42","43","43","45","46","47","48","49","sptel","zgtel","vp"],["1","2","3","5","6","7","8","9","11","12","13","14","15","16","17","21","22","23","24","25","27","28","29","30","31","42","43","43","45","46","47","48","49","sptel","zgtel","vp"]]];

//container["prazen"] = [[[],[],[],[],[],[],[],[],[],[]],[[],[],[],[],[],[],[],[],[],[]],[[],[],[],[],[],[],[],[],[],[]],[[],[],[],[],[],[],[],[],[],[]],[[],[],[],[],[],[],[],[],[],[]]];

var tedni = [[[1535925600000,1536357540000],[1538344800000,1538776740000],[1541372400000,1541804340000],[1543791600000,1544223540000],[1547420400000,1547852340000],[1549839600000,1550357940000],[1552863600000,1553295540000],[1555279200000,1555711140000],[1558303200000,1558735140000]],[[1536530400000,1536962340000],[1538949600000,1539381540000],[1541977200000,1542409140000],[1544396400000,1544828340000],[1548025200000,1548457140000],[1550444400000,1550876340000],[1553468400000,1553900340000],[1555884000000,1556315940000],[1558908000000,1559339940000]],[[1537135200000,1537567140000],[1539554400000,1539986340000],[1542582000000,1543013940000],[1545001200000,1545433140000],[1548630000000,1549061940000],[1551654000000,1552085940000],[1554069600000,1554501540000],[1556834400000,1557525540000],[1560117600000,1560549540000]],[[1537740000000,1538171940000],[1540159200000,1540591140000],[1543186800000,1543618740000],[1546470000000,1547247540000],[1549234800000,1549666740000],[1552258800000,1552690740000],[1554674400000,1555106340000],[1557698400000,1558130340000],[1560722400000,1561154340000]]];

prikaz(stUrnika());
obarvaj();


function stUrnika() {	
    for (var u = 0; u < tedni.length; u++) {
        for (var t = 0; t < tedni[u].length; t++) {
            if (tedni[u][t][0] <= Date.now() && tedni[u][t][1] >= Date.now()) {
				document.getElementById("urnik").innerHTML = "Trenutni urnik: <b>" + (u+1) + "</b>";
                return (u+1);
            } else if(tedni[u][t][0] <= (Date.now() + 172800000) && tedni[u][t][1] >= (Date.now() + 172800000)) {
				document.getElementById("urnik").innerHTML = "Prihajajoči urnik: <b>" + (u+1) + "</b>";
                return (u+1);
			}
        }
    }
	document.getElementById("urnik").innerHTML = "Počitnice <b>:)</b>";
}


function prikaz(a) {
    var zbirka = container["p" + a];
    //console.log(zbirka);

    var tabela = document.getElementById("tbl");

    for (var s = 0; s < zbirka.length; s++) {

        for (var v = 0; v < zbirka[s].length; v++) {
            //console.log(zbirka[s][v]);
            vrste = tabela.getElementsByTagName("tr");
            var stolpci = vrste[v + 1].getElementsByTagName("td");
            stolpci[s + 1].innerText = zbirka[s][v];
            stolpci[s + 1].innerText = stolpci[s + 1].innerText.replace(/,/g, ", ");

        }
    }
    vrste[0].getElementsByTagName("td")[0].innerText = "Urnik " + a;

}

function obarvaj() {
   var d = new Date();

	for(var i = 1; i < vrste.length; i++) {
		var casovi = (vrste[i].getElementsByTagName("td")[0].innerText.split("\n")[1].split("(")[1].split(")")[0]);
		var us = casovi.split("–")[0].split(".")[0]; // ura start
		var ms = casovi.split("–")[0].split(".")[1]; // min start
		var ue = casovi.split("–")[1].split(".")[0]; // ura end
		var me = casovi.split("–")[1].split(".")[1]; // min end
		
		d.setHours(us);
		var cs = d.setMinutes(ms); // cas start
		
		d.setHours(ue);
		var ce = d.setMinutes(me); // cas end

		// Obarvamo trenutno uro in uro, ki pride čez 15 minut.
		if((Date.now() >= cs && Date.now() <= ce) || ((Date.now() + 900000) >= cs && (Date.now() + 900000) <= ce)) {
			//vrste[i].getElementsByTagName("td")[d.getDay() % 6].style.backgroundColor = "#fff496";
			var napredek = (Date.now() - cs)/(ce - cs);
			console.log(napredek);
			//vrste[i].getElementsByTagName("td")[d.getDay() % 6].style.cssText = "border: 2px green solid; background: linear-gradient(#90ee90 "+(napredek*100)+"%, #fff496 "+(napredek*100)+"%)"; 
			vrste[i].getElementsByTagName("td")[d.getDay() % 6].style.cssText = "background: linear-gradient(#fffddd "+(napredek*100)+"%, #fff496 "+(napredek*100)+"%)"; 
		}
	}

	vrste[0].getElementsByTagName("td")[d.getDay() % 6].style.cssText = "border: 2px solid #ffa500; background-color: #ffedcc"; // Obarvamo dan na vrhu
}




