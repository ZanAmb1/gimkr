// Seznam prostosti učilnic GimKr
// Podatki zajeti 2020-09-06
// Nazadnje posodobljeno 2018-10-28
/* Avtor: Žan Žnidar */

var container = {};

container["p"] = [[["Ni podatkov."],[],[],[],[],[],[],[],[],[]],[[],[],[],[],[],[],[],[],[],[]],[[],[],[],[],[],[],[],[],[],[]],[[],[],[],[],[],[],[],[],[],[]],[[],[],[],[],[],[],[],[],[],[]]]
;
container["p1"] = [[["7","8","12","14","22","26","43","47"],["7","8","26","47"],["4","7","8","23","26","28","47"],["2","4","9","11","12","13","17","22","24","25","26","27","30","42","44","46","48","49","sptel","vp","zgtel"],["2","3","12","14","15","16","22","23","26","27","43","45"],["1","6","8","26","28","31","43"],["7","23","26","42","46","47","49"],["7","12","14","17","23","26","27","46","47","49"],["1","2","3","4","5","6","7","8","9","11","12","13","14","15","16","17","23","25","26","27","28","29","30","31","42","44","45","46","47","48","49"],["1","2","3","4","5","6","7","8","9","11","12","13","14","15","16","17","23","25","26","27","28","29","30","31","42","44","45","46","47","48","49","sptel","vp","zgtel"]],[["1","26","27","31","sptel","vp","zgtel"],["2","11","26","27","31"],["2","7","8","11","21","28"],["2","6","11","16","17","23","24","25","27","48"],["3","4","5","8","11","13","14","15","17","25","26","27","29","31","42","43","45","46","47","49","vp"],["3","4","24","26","46"],["3","4","16","26","44"],["2","3","4","5","6","9","11","13","14","15","16","17","21","22","23","24","25","26","27","28","29","30","31","42","43","44","45","46","47","48","sptel","vp","zgtel"],["2","3","4","5","6","9","11","13","14","15","16","17","21","22","23","24","25","26","27","28","29","30","31","42","43","44","45","46","47","48","49","sptel","vp","zgtel"],["1","2","3","4","5","6","7","8","9","11","12","13","14","15","16","17","21","22","23","24","25","26","27","28","29","30","31","42","43","44","45","46","47","48","49","sptel","vp","zgtel"]],[["6","14","23","26","29","45","47"],["6","14","23","26","30","47"],["4","15","25","26","zgtel"],["2","4","5","9","12","22","26","sptel","vp","zgtel"],["4","6","7","11","12","14","23","24","26","28","29","44","47","48"],["4","5","26","49"],["4","5","8","14","26","27","31","42","vp"],["2","3","4","6","7","11","12","14","15","16","17","21","23","25","26","27","28","29","30","31","42","43","44","45","46","47","49","sptel","vp","zgtel"],["1","2","3","4","6","7","11","12","14","15","16","17","21","23","25","26","27","28","29","30","31","42","43","44","45","46","47","49","sptel","vp","zgtel"],["1","2","3","4","5","6","7","8","9","11","12","13","14","15","16","17","21","22","23","24","25","26","27","28","29","30","31","42","43","44","45","46","47","48","49","sptel","vp","zgtel"]],[["3","26","27","47","48"],["3","26","28","47","48"],["4","7","8","9","13","26","28"],["2","4","5","6","9","11","15","26","27","29","43","45","47","49"],["2","3","11","12","13","16","17","22","23","25","26","27","29","30","42","44","45","46","47"],["7","8","26","28","45"],["3","6","13","15","26","29","45","47"],["5","6","8","13","16","17","21","25","26","27","30","44","47"],["2","3","4","5","6","7","8","11","12","13","14","15","16","17","21","22","23","24","25","26","27","28","29","30","31","42","43","44","45","46","47","48","49"],["1","2","3","4","5","6","7","8","11","12","13","14","15","16","17","21","22","23","24","25","26","27","28","29","30","31","42","43","44","45","46","47","48","49","sptel","vp","zgtel"]],[["16","17","22","23","26","27","30","42","43","44","47","49"],["4","5","7","8","15","26","28"],["7","24","26","28","31"],["3","6","12","22","23","25","26","29","30","31","43","47","48","49"],["4","5","6","7","9","13","14","15","16","17","24","25","26","27","30","42","44","45","46","48"],["4","13","25","26","27"],["4","6","8","11","12","14","26","28","zgtel"],["3","6","8","16","17","21","22","23","25","26","27","28","31","44","47","48","49"],["2","3","4","5","6","7","8","9","11","12","13","14","15","16","17","21","22","23","24","25","26","27","28","29","30","31","42","43","44","45","46","47","48","49","sptel","vp","zgtel"],["1","2","3","4","5","6","7","8","9","11","12","13","14","15","16","17","21","22","23","24","25","26","27","28","29","30","31","42","43","44","45","46","47","48","49","sptel","vp","zgtel"]]]
;
container["p2"] = [[["6","7","8","22","26","43"],["6","7","8","26"],["4","23","26","28","47","48"],["2","5","9","11","12","13","15","17","22","24","25","26","27","28","29","30","42","44","46","47","48","49"],["6","12","14","15","16","22","23","26","27","29","43","45","48"],["2","4","6","26","27","43"],["7","23","26","42","46","47","49"],["7","12","14","16","23","26","42","46","47","sptel","vp","zgtel"],["1","2","3","4","5","6","7","8","9","11","12","13","14","15","16","17","21","23","25","26","27","28","29","30","31","42","44","45","46","47","48","49"],["1","2","3","4","5","6","7","8","9","11","12","13","14","15","16","17","21","23","25","26","27","28","29","30","31","42","44","45","46","47","48","49","sptel","vp","zgtel"]],[["14","21","26","31","vp"],["2","11","21","26","31"],["1","2","4","8","11","21"],["4","17","25","27","29","30","49"],["2","3","4","6","7","8","9","13","14","16","17","22","23","24","25","26","27","31","42","43","45","46","47","49","vp"],["7","24","26","27","46"],["7","9","26","27","sptel","vp","zgtel"],["2","3","4","5","6","9","11","12","13","14","15","16","17","22","23","24","26","27","28","29","30","31","42","43","44","45","46","47","48","sptel","vp","zgtel"],["2","3","4","5","6","9","11","12","13","14","15","16","17","22","23","24","26","27","28","29","30","31","42","43","44","45","46","47","48","49","sptel","vp","zgtel"],["1","2","3","4","5","6","7","8","9","11","12","13","14","15","16","17","21","22","23","24","25","26","27","28","29","30","31","42","43","44","45","46","47","48","49","sptel","vp","zgtel"]],[["6","7","14","25","26","28","43","47","sptel"],["6","14","16","26","28","43","44","47"],["8","26","28","30","31"],["8","9","11","12","22","26","28","31","48"],["2","3","5","6","11","12","14","15","22","23","26","28","31","43","44","45","47","48"],["2","5","26","49"],["2","3","4","5","17","25","26","48"],["3","4","5","6","7","11","13","14","15","22","23","25","26","27","28","29","31","42","43","44","45","46","47","48","49","sptel","vp","zgtel"],["1","3","4","5","6","7","11","13","14","15","16","21","22","23","25","26","27","28","29","31","42","43","44","45","46","47","48","49","sptel","vp","zgtel"],["1","2","3","4","5","6","7","8","9","11","12","13","14","15","16","17","21","22","23","24","25","26","27","28","29","30","31","42","43","44","45","46","47","48","49","sptel","vp","zgtel"]],[["7","23","26","27","48"],["3","7","23","26","48"],["7","9","13","24","25","26"],["3","13","16","17","25","26","27","29","42","44","45","46","47"],["3","4","5","8","11","12","14","15","17","22","23","24","25","26","27","30","42","47","48","49"],["4","8","11","26","28","45"],["6","7","13","26","45"],["6","9","12","13","14","16","26","27","29","30","44","49"],["1","2","3","4","5","6","7","8","9","11","12","13","14","16","17","22","23","24","25","26","27","28","29","30","31","42","43","44","45","46","47","48","49"],["1","2","3","4","5","6","7","8","9","11","12","13","14","16","17","21","22","23","24","25","26","27","28","29","30","31","42","43","44","45","46","47","48","49","sptel","vp","zgtel"]],[["16","17","22","23","26","27","31","43","44","47","49"],["5","8","15","26","28","31"],["4","8","24","26","28"],["4","5","6","8","12","17","23","26","30","42","43","45","48"],["2","4","5","6","8","9","11","13","15","16","17","24","25","27","29","30","43","44","46","49"],["8","13","29"],["8","12","14","26","29","sptel"],["8","14","16","17","22","26","27","28","30","31","42","43","44","47","49","sptel","vp","zgtel"],["1","2","3","4","5","6","7","8","9","11","12","13","14","15","16","17","21","22","23","24","25","26","27","28","29","30","31","42","43","44","45","46","47","48","49","sptel","vp","zgtel"],["1","2","3","4","5","6","7","8","9","11","12","13","14","15","16","17","21","22","23","24","25","26","27","28","29","30","31","42","43","44","45","46","47","48","49","sptel","vp","zgtel"]]]
;
container["p3"] = [[["Ni podatkov."],[],[],[],[],[],[],[],[],[]],[[],[],[],[],[],[],[],[],[],[]],[[],[],[],[],[],[],[],[],[],[]],[[],[],[],[],[],[],[],[],[],[]],[[],[],[],[],[],[],[],[],[],[]]]
;
container["p4"] = [[["Ni podatkov."],[],[],[],[],[],[],[],[],[]],[[],[],[],[],[],[],[],[],[],[]],[[],[],[],[],[],[],[],[],[],[]],[[],[],[],[],[],[],[],[],[],[]],[[],[],[],[],[],[],[],[],[],[]]]
;
//container["prazen"] = [[[],[],[],[],[],[],[],[],[],[]],[[],[],[],[],[],[],[],[],[],[]],[[],[],[],[],[],[],[],[],[],[]],[[],[],[],[],[],[],[],[],[],[]],[[],[],[],[],[],[],[],[],[],[]]];

var tedni = [[[1598911200000,1599256740000],[1601244000000,1601675940000],[1604271600000,1604703540000],[1606690800000,1607122740000],[1609714800000,1610146740000],[1612134000000,1612565940000],[1615158000000,1615589940000],[1617660000000,1618005540000],[1620597600000,1621029540000],[1623016800000,1623448740000]],[[1599429600000,1599861540000],[1601848800000,1602280740000],[1604876400000,1605308340000],[1607295600000,1607727540000],[1610319600000,1610751540000],[1612825200000,1613170740000],[1615762800000,1616194740000],[1618178400000,1618610340000],[1621202400000,1621634340000],[1624226400000,1624571940000]],[[1600034400000,1600466340000],[1602453600000,1602885540000],[1605481200000,1605913140000],[1607900400000,1608332340000],[1610924400000,1611356340000],[1613343600000,1613775540000],[1616367600000,1616799540000],[1618783200000,1619215140000],[1621807200000,1622239140000]],[[1600639200000,1601071140000],[1603058400000,1603490340000],[1606086000000,1606517940000],[1608505200000,1608850740000],[1611529200000,1611961140000],[1614553200000,1614985140000],[1616968800000,1617400740000],[1619992800000,1620424740000],[1622412000000,1622843940000]]]
;
prikaz(stUrnika());
obarvaj();


function stUrnika() {	
    for (var u = 0; u < tedni.length; u++) {
        for (var t = 0; t < tedni[u].length; t++) {
            if (tedni[u][t][0] <= Date.now() && tedni[u][t][1] >= Date.now()) {
				document.getElementById("urnik").innerHTML = "Trenutni urnik: <b>" + (u+1) + "</b>";
                return (u+1);
            } else if(tedni[u][t][0] <= (Date.now() + 172800000) && tedni[u][t][1] >= (Date.now() + 172800000)) {
				document.getElementById("urnik").innerHTML = "Prihajajoči urnik: <b>" + (u+1) + "</b>";
                return (u+1);
			}
        }
    }
	document.getElementById("urnik").innerHTML = "Počitnice <b>:)</b>";
	return ("");
}


function prikaz(a) {
    var zbirka = container["p" + a];
    //console.log(zbirka);

    var tabela = document.getElementById("tbl");

    for (var s = 0; s < zbirka.length; s++) {

        for (var v = 0; v < zbirka[s].length; v++) {
            //console.log(zbirka[s][v]);
            vrste = tabela.getElementsByTagName("tr");
            var stolpci = vrste[v + 1].getElementsByTagName("td");
            stolpci[s + 1].innerText = zbirka[s][v];
            stolpci[s + 1].innerText = stolpci[s + 1].innerText.replace(/,/g, ", ");

        }
    }
    vrste[0].getElementsByTagName("td")[0].innerText = "Urnik " + a;

}

function obarvaj() {
   var d = new Date();

	for(var i = 1; i < vrste.length; i++) {
		var casovi = (vrste[i].getElementsByTagName("td")[0].innerText.split("\n")[1].split("(")[1].split(")")[0]);
		var us = casovi.split("–")[0].split(".")[0]; // ura start
		var ms = casovi.split("–")[0].split(".")[1]; // min start
		var ue = casovi.split("–")[1].split(".")[0]; // ura end
		var me = casovi.split("–")[1].split(".")[1]; // min end
		
		d.setHours(us);
		var cs = d.setMinutes(ms); // cas start
		
		d.setHours(ue);
		var ce = d.setMinutes(me); // cas end

		// Obarvamo trenutno uro in uro, ki pride čez 15 minut.
		if((Date.now() >= cs && Date.now() <= ce) || ((Date.now() + 900000) >= cs && (Date.now() + 900000) <= ce)) {
			//vrste[i].getElementsByTagName("td")[d.getDay() % 6].style.backgroundColor = "#fff496";
			var napredek = (Date.now() - cs)/(ce - cs);
			console.log(napredek);
			//vrste[i].getElementsByTagName("td")[d.getDay() % 6].style.cssText = "border: 2px green solid; background: linear-gradient(#90ee90 "+(napredek*100)+"%, #fff496 "+(napredek*100)+"%)"; 
			vrste[i].getElementsByTagName("td")[d.getDay() % 6].style.cssText = "background: linear-gradient(#fffddd "+(napredek*100)+"%, #fff496 "+(napredek*100)+"%)"; 
		}
	}

	vrste[0].getElementsByTagName("td")[d.getDay() % 6].style.cssText = "border: 2px solid #ffa500; background-color: #ffedcc"; // Obarvamo dan na vrhu
}




